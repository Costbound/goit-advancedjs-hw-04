{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst pixabayApiUrl = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\nconst MAX_PAGES = 500 / PER_PAGE;\n\nconst defaultConfig = {\n  key: '40945002-e125ab8d3394997b1a8dc0871',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: PER_PAGE,\n};\n\nexport default async function fetchImages(searchWord, pixabayConfig = {}) {\n  if (pixabayConfig.page > MAX_PAGES) return { hits: [] };\n  const res = await axios.get(pixabayApiUrl, {\n    params: { ...defaultConfig, ...pixabayConfig, q: searchWord },\n  });\n  return res.data;\n}\n","export function buildImagesHtml(images) {\n  return images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n            <div class=\"img-wrapper\">\n              <a href=\"${largeImageURL}\">\n                  <img\n                    class=\"gallery-img\"\n                    src=\"${webformatURL}\" \n                    alt=\"${tags}\"\n                    width=\"360\"\n                    height=\"200\">\n              </a> \n            </div>\n            <div class=\"text-wrapper\">\n              <ul class=\"img-info-list\">\n                <li class=\"info-item\">\n                  <h3 class=\"info-title\">likes</h3>\n                  <p class=\"info-text\">${likes}</p>\n                </li>\n                <li class=\"info-item\">\n                  <h3 class=\"info-title\">views</h3>\n                  <p class=\"info-text\">${views}</p>\n                </li>\n                <li class=\"info-item\">\n                  <h3 class=\"info-title\">comments</h3>\n                  <p class=\"info-text\">${comments}</p>\n                </li>\n                <li class=\"info-item\">\n                  <h3 class=\"info-title\">downloads</h3>\n                  <p class=\"info-text\">${downloads}</p>\n                </li>\n              </ul>\n            </div>\n        </li>`;\n      }\n    )\n    .join(' ');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport fetchImages from './js/pixabay-api';\nimport { buildImagesHtml } from './js/render-functions';\n\nconst form = document.querySelector('form');\nconst [searchInput] = form.elements;\nconst gallery = document.querySelector('.gallery');\nconst moreBtn = document.querySelector('.more-btn');\nconst moreContainer = document.querySelector('.more_container');\n\nconst loader = document.createElement('span');\nloader.classList.add('loader');\n\nlet searchWord = '';\nlet page = 1;\n\niziToast.settings({\n  position: 'topRight',\n  messageSize: '16px',\n  displayMode: 2,\n});\nconst simpleGallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  searchWord = searchInput.value.trim();\n  page = 1;\n  gallery.innerHTML = '';\n\n  if (searchWord === '') {\n    iziToast.error({ message: 'Search field cannot be empty' });\n    moreBtn.classList.add('visually-hidden');\n    return;\n  }\n  loader.classList.add('center');\n  gallery.appendChild(loader);\n\n  try {\n    const hitsData = await fetchImages(searchWord, { page });\n    const images = hitsData.hits;\n    if (images.length === 0) {\n      s;\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n    const imagesHtml = buildImagesHtml(images);\n    gallery.innerHTML = imagesHtml;\n    simpleGallery.refresh();\n    hitsData.totalHits > 15\n      ? moreBtn.classList.remove('visually-hidden')\n      : moreBtn.classList.add('visually-hidden');\n  } catch (error) {\n    handleError(error);\n  } finally {\n    loader.remove();\n    loader.classList.remove('center');\n  }\n});\n\nmoreBtn.addEventListener('click', async () => {\n  moreBtn.classList.add('visually-hidden');\n  moreContainer.append(loader);\n\n  try {\n    const hitsData = await fetchImages(searchWord, { page: page + 1 });\n    page++;\n    const images = hitsData.hits;\n    if (images.length === 0) {\n      iziToast.error({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      return;\n    }\n    const imagesHtml = buildImagesHtml(images);\n    gallery.insertAdjacentHTML('beforeend', imagesHtml);\n    simpleGallery.refresh();\n    moreBtn.classList.remove('visually-hidden');\n    scrollToNewImages();\n  } catch (error) {\n    handleError(error);\n  } finally {\n    loader.remove();\n  }\n});\n\nconst handleError = error => {\n  console.error('Error:', error);\n  iziToast.error({\n    message: 'Something went wrong. Please try again later.',\n  });\n};\n\nfunction scrollToNewImages() {\n  const card = gallery.querySelector('.gallery-item');\n  if (card) {\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["pixabayApiUrl","PER_PAGE","MAX_PAGES","defaultConfig","fetchImages","searchWord","pixabayConfig","axios","buildImagesHtml","images","largeImageURL","webformatURL","tags","likes","views","comments","downloads","form","searchInput","gallery","moreBtn","moreContainer","loader","page","iziToast","simpleGallery","SimpleLightbox","e","hitsData","imagesHtml","error","handleError","scrollToNewImages","card","cardHeight"],"mappings":"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"}